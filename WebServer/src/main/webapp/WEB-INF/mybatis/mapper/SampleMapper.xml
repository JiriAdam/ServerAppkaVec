<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cz.groupid.mybatis.dao.SampleMapper" >
  <resultMap id="BaseResultMap" type="cz.groupid.mybatis.mybatis.model.SampleObject" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 03 00:39:54 CEST 2013.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="batch" property="batch" jdbcType="INTEGER" />
    <result column="stan" property="stan" jdbcType="NUMERIC" />
    <result column="sample_status" property="sampleStatus" jdbcType="INTEGER" />

  </resultMap>
 

  <sql id="BLabla" >
    SQL part ... kterou budes containovat ruzne prez tag include
  </sql>
  
  <sql id="Base_Column_List" >
   //standardne budem mit tohle vygenerovany pro entitu.. 
    id, batch, stan....
  </sql>
 

<!--    <select id="getListSamples"  resultMap="getListSamples" -output parameterType="HashMap" -input type> -->
<!--    		..... -->
<!--    </select> -->
   
<!--  nejaka metoda co jsem kdesi nasel -->
    <select id="getCountReport" resultType="long" parameterType="HashMap" >
 	   SELECT  count (report2.id)
			    FROM eod_report report2
			    INNER JOIN transaction T ON t.id=report2.id
			     <if test="(groupWholeNetwork==false or groupWholeNetwork==null) ">
			  		<include refid="group_join2" /> 
			     </if>
			    WHERE true 
					<if test="(groupWholeNetwork==false or groupWholeNetwork==null) ">
				  			AND (T.org_unit_tree_path LIKE CONCAT(OrgUnit2.org_unit_tree_path, '.%') OR T.org_unit_tree_path=OrgUnit2.org_unit_tree_path)
			  		    </if>
					    <if test="year != null">
					  		AND  DATE_PART('year', t."transaction_date") = #{year, jdbcType=TIMESTAMP} 
						</if>
						<if test="month != null">
						  		AND  DATE_PART('month', t."transaction_date") = #{month, jdbcType=TIMESTAMP} 
						</if>
						<if test="day != null">
						  		AND  DATE_PART('day', t."transaction_date") = #{day, jdbcType=TIMESTAMP} 
						</if>
						<if test="orgUnitTreePath != null &amp;&amp; orgUnitTreePath!=''">  
						  		AND (T."org_unit_tree_path" LIKE CONCAT(#{orgUnitTreePath, jdbcType=VARCHAR} , '.%') OR T."org_unit_tree_path" = #{orgUnitTreePath, jdbcType=VARCHAR} )
						</if>
 	</select>
  
  

</mapper>